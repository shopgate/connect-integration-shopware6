{% sw_extends '@Storefront/storefront/base.html.twig' %}

{% block base_body_classes %}{{ parent() }}{% if page.header.extensions.sg_connect_data %} is-sg-app{% endif %}{% endblock %}

{% block base_body_script %}
    {{ parent() }}

    {% set sgConnectOptions = sgConnectOptions|default({})|replace_recursive({
        controllerName: controllerName|lower,
        actionName: controllerAction|lower,
        env: app.environment
    }) %}

    {% block sgconnect_plugin_init %}

        {% if page.header.extensions.sg_connect_data %}
            <template data-sg-connect-app-plugin
                      data-sg-connect-app-plugin-options="{{ sgConnectOptions|json_encode }}"></template>
        {% endif %}

    {% endblock %}

{% endblock %}
